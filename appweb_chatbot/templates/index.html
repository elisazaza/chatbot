<!DOCTYPE html>
<html lang="es">
<head>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Historial e Imagen</title>
<style>
  body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  display: flex;
  height: 100vh;
  flex-direction: column;
  color: #344E41; /* texto base */
  background: linear-gradient(135deg, #DAD7CD, #A3B18A, #588157, #3A5A40, #344E41);
  background-size: 300% 300%;
  animation: gradientBG 15s ease infinite;
  }

  .container {
    flex: 1;
    display: flex;
    overflow: hidden;
  }

  .historial {
  margin-bottom: 12px;
  padding: 10px;
  background-color: #A3B18A;
  color: #fff;
  border-radius: 8px;
  font-weight: 500;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  }

  .imagen {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .imagen img {
    max-width: 80%;
    max-height: 80%;
    border: 0px solid #ccc;
  }

  .input-container {
  display: flex;
  padding: 12px;
  border-top: 2px solid #3A5A40;
  background-color: rgba(52, 78, 65, 0.9);
  }

  .input-container input {
    flex: 1;
    padding: 10px;
    font-size: 16px;flex: 1;
  padding: 12px;
  font-size: 16px;
  border-radius: 8px;
  border: none;
  outline: none;
  margin-right: 10px;
  background: #DAD7CD;
  color: #344E41;
  }

  .input-container button {
    padding: 12px 18px;
  font-size: 16px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  background-color: #588157;
  color: white;
  font-weight: bold;
  transition: background 0.3s ease;
  }

  .historial-item {
    margin-bottom: 12px;
  padding: 10px;
  background-color: #A3B18A;
  color: #fff;
  border-radius: 8px;
  font-weight: 500;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  }
</style>
</head>
<body>

<div class="container">
  <div class="historial" id="historial">
    <!-- Aquí se irá mostrando el historial -->
  </div>
  <div class="imagen">
    <img src="{{ url_for('static', filename='mono.png') }}" alt="Imagen central">
  </div>
</div>

<div class="input-container">
  <input type="text" id="textoInput" placeholder="Escribe una operación (ej. 'dos mas tres')">
  <button onclick="enviarFrase()">Enviar</button>
</div>

<script>
  async function enviarFrase() {
    const input = document.getElementById('textoInput');
    const historial = document.getElementById('historial');
    const frase = input.value.trim();

    if (frase !== '') {
      // Enviar frase al servidor
      const response = await fetch('/procesar', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({frase: frase})
      });

      const data = await response.json();

      // Agregar al historial (pregunta y respuesta)
      const item = document.createElement('div');
      item.className = 'historial-item';
      item.innerHTML = `<b>Tú:</b> ${frase}<br><b>Servidor:</b> ${data.respuesta}`;
      historial.appendChild(item);

      input.value = '';
      historial.scrollTop = historial.scrollHeight; // auto scroll
    }
  }

  // Enviar con Enter
  document.getElementById('textoInput').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      enviarFrase();
    }
  });
</script>

</body>
</html>
